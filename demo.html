<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Demo | Textify</title>
  <script src="https://cdn.jsdelivr.net/gh/lukemccrea/Textify/main.min.js"> </script>
</head>

<body>
  <input type="file" accept="image/*" id="imgInp">
  <input type="range" min="1" max="100" id="scale">
  <input type="text" min="2" max="100" id="characters">
  <button onclick="imageToText()">Go</button>
  <div id='container'>
  <p id="display"></p>
  </div>
  <script>
const imgInp = document.getElementById("imgInp");
const display = document.getElementById("display");
const scaleInp = document.getElementById("scale");

function imageToText() {
  let [file] = imgInp.files
  if (file) {
    let imageUrl = URL.createObjectURL(file)
    textify(imageUrl, (scaleInp.value / 100)).then(text => {
      display.innerHTML = text.split('\n').join('<br>');
    })

  }
}
    
//Scale the p element to fit container
// Get the container element
const container = document.getElementById('container');

// Measure the width of the container and the text
const containerWidth = container.offsetWidth;
const textWidth = display.scrollWidth;

// Calculate the ratio of the container width to the text width
const ratio = containerWidth / textWidth;

// Set the font size and other styles of the text based on the ratio
display.style.fontSize = (ratio * 100) + '%';
display.style.lineHeight = (ratio * 100) + '%';
display.style.letterSpacing = `calc(${(ratio * 100)}'%' / 2.5)`;

  </script>
  <style>
    p {
      font-family: monospace;
      font-size: 10px;
      letter-spacing: 4px;
      line-height: 10px;
    }
    
    #container {
      width: 80%;
      min-height: 60%;
      display: block;
      margin: auto;
    }
  </style>
</body>

</html>
